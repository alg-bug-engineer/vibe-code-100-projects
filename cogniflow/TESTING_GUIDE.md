# 测试新用户系统的步骤

## 🔧 重置系统状态

如果您之前访问过系统并且有登录状态，需要先清空本地存储：

### 方法1: 使用浏览器控制台
1. 打开浏览器开发者工具 (F12)
2. 在控制台 (Console) 中输入：`clearAllStorage()`
3. 刷新页面

### 方法2: 手动清理
1. 按 F12 打开开发者工具
2. 切换到 Application 标签
3. 在左侧找到 Local Storage
4. 删除所有 `cogniflow_` 开头的项目

## 🧪 测试步骤

### 1. 访问系统
- 打开：http://127.0.0.1:5173/
- 现在应该会自动跳转到登录页面 (`/login`)

### 2. 测试注册功能
1. 在登录页面，点击"注册"标签
2. 填写注册信息：
   - 用户名：`testuser1`
   - 邮箱：`test1@example.com`
   - 密码：`test123456`
3. 点击"注册"
4. 注册成功后应该自动登录并跳转到首页

### 3. 测试登录功能
1. 登出：在页面右上角点击登出按钮（如果有）
2. 回到登录页面
3. 在"密码登录"标签中：
   - 用户名：`testuser1`
   - 密码：`test123456`
4. 点击"登录"
5. 应该成功登录并进入系统

### 4. 测试快速登录（兼容功能）
1. 登出
2. 在登录页面选择"快速登录"标签
3. 点击"快速登录（使用默认用户）"
4. 应该创建一个默认用户并自动登录

### 5. 测试数据隔离
1. 使用用户1登录，创建一些条目
2. 登出，注册用户2：
   - 用户名：`testuser2`
   - 邮箱：`test2@example.com`
   - 密码：`test654321`
3. 用户2登录后，应该看不到用户1的数据
4. 创建一些用户2的数据
5. 切换回用户1，应该只看到用户1的数据

### 6. 使用测试页面
访问：http://127.0.0.1:5173/test
- 查看系统统计信息
- 运行自动化测试
- 管理用户数据

## 🚀 预期行为

- ✅ 未登录用户访问 `/` 会被重定向到 `/login`
- ✅ 已登录用户访问 `/login` 会被重定向到 `/`
- ✅ 注册成功后自动登录
- ✅ 每个用户的数据完全隔离
- ✅ 支持多种登录方式
- ✅ 登录状态持久化

## 🛠️ 故障排除

### 如果仍然直接进入系统
1. 确保已清空本地存储
2. 硬刷新页面 (Ctrl+Shift+R)
3. 在控制台运行 `localStorage.clear()` 然后刷新

### 如果注册失败
- 检查用户名是否已存在
- 确保邮箱格式正确
- 确保密码符合要求

### 如果登录失败
- 确认用户名和密码正确
- 检查是否已完成注册
- 查看浏览器控制台的错误信息

现在您应该能够看到完整的用户登录/注册流程了！🎉