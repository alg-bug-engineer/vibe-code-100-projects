# CogniFlow 部署检查清单

## ✅ 部署前检查

### 1. 环境变量配置

- [ ] 已配置 `VITE_SUPABASE_URL`
- [ ] 已配置 `VITE_SUPABASE_ANON_KEY`
- [ ] 已配置 `VITE_WENXIN_API_KEY` (必需)
- [ ] 已配置 `VITE_WENXIN_SECRET_KEY` (必需)
- [ ] 已配置 `VITE_APP_ID`
- [ ] 已配置登录相关变量

### 2. 数据库配置

- [ ] Supabase项目已创建
- [ ] 数据库迁移已执行
- [ ] profiles表已创建
- [ ] items表已创建
- [ ] RLS策略已启用
- [ ] 触发器已创建

### 3. API配置

- [ ] 文心大模型API已开通
- [ ] API密钥已验证可用
- [ ] API账户有足够余额

### 4. 代码检查

- [ ] 运行 `npm run lint` 无错误
- [ ] TypeScript编译无错误
- [ ] 所有依赖已安装
- [ ] 环境变量已正确引用

### 5. 功能测试

- [ ] 用户注册登录正常
- [ ] 首个用户成为管理员
- [ ] 快速输入功能正常
- [ ] AI处理返回正确结果
- [ ] 数据保存到数据库
- [ ] 四个视图显示正常
- [ ] 搜索功能正常
- [ ] 编辑功能正常
- [ ] 归档删除功能正常
- [ ] 管理面板正常(管理员)

## 📋 部署步骤

### 步骤1: 准备环境

```bash
# 安装依赖
pnpm install

# 检查环境变量
cat .env
```

### 步骤2: 配置文心API

1. 访问百度智能云控制台
2. 开通文心一言服务
3. 创建应用获取密钥
4. 更新`.env`文件

### 步骤3: 验证配置

```bash
# 运行lint检查
npm run lint

# 构建测试
npm run build
```

### 步骤4: 数据库迁移

数据库已自动配置,无需手动操作。

### 步骤5: 首次启动

1. 启动应用
2. 使用手机号注册第一个账号
3. 验证管理员权限
4. 测试基本功能

## 🔍 验证清单

### 用户功能验证

- [ ] 可以正常登录
- [ ] 可以输入信息
- [ ] AI正确分类信息
- [ ] 信息显示在正确视图
- [ ] 可以编辑信息
- [ ] 可以完成任务
- [ ] 可以归档信息
- [ ] 可以删除信息
- [ ] 搜索功能正常
- [ ] 标签功能正常

### 管理功能验证

- [ ] 管理员可以访问管理面板
- [ ] 可以查看用户列表
- [ ] 可以修改用户角色
- [ ] 可以查看统计信息
- [ ] 普通用户无法访问管理面板

### 安全验证

- [ ] 未登录用户被重定向到登录页
- [ ] 用户只能看到自己的数据
- [ ] RLS策略正常工作
- [ ] 管理员权限正常
- [ ] API密钥未暴露在前端

## 🚨 常见问题

### 问题1: AI处理失败

**症状**: 输入后显示"处理失败,请重试"

**解决方案**:
1. 检查文心API密钥是否正确
2. 确认API账户有余额
3. 查看浏览器控制台错误
4. 验证网络连接

### 问题2: 登录失败

**症状**: 无法登录或一直加载

**解决方案**:
1. 检查Supabase配置
2. 确认数据库连接正常
3. 验证profiles表已创建
4. 清除浏览器缓存

### 问题3: 数据不显示

**症状**: 登录后看不到数据

**解决方案**:
1. 检查RLS策略是否启用
2. 确认用户ID正确
3. 查看数据库中是否有数据
4. 刷新页面重试

### 问题4: 管理面板无法访问

**症状**: 点击管理按钮无反应

**解决方案**:
1. 确认当前用户是管理员
2. 检查profiles表中的role字段
3. 重新登录
4. 查看浏览器控制台错误

## 📊 性能检查

- [ ] 首屏加载时间 < 3秒
- [ ] AI处理响应时间 < 5秒
- [ ] 搜索响应时间 < 1秒
- [ ] 页面切换流畅
- [ ] 移动端体验良好

## 🔒 安全检查

- [ ] 所有API密钥在环境变量中
- [ ] 生产环境使用HTTPS
- [ ] RLS策略已启用
- [ ] 用户数据隔离
- [ ] 管理员权限正确

## 📱 兼容性检查

### 浏览器兼容性
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### 设备兼容性
- [ ] 桌面端 (1920x1080)
- [ ] 笔记本 (1366x768)
- [ ] 平板 (768x1024)
- [ ] 手机 (375x667)

## 📝 部署后任务

- [ ] 监控错误日志
- [ ] 检查API使用量
- [ ] 验证用户反馈
- [ ] 备份数据库
- [ ] 更新文档

## 🎯 成功标准

部署成功的标志:
1. ✅ 用户可以正常注册登录
2. ✅ AI处理功能正常
3. ✅ 所有视图正常显示
4. ✅ 数据正确保存和读取
5. ✅ 管理功能正常(管理员)
6. ✅ 无严重错误或警告
7. ✅ 性能指标达标
8. ✅ 安全策略生效

## 📞 支持联系

如遇到问题:
1. 查看 `QUICK_START.md` 快速指南
2. 查看 `COGNIFLOW_GUIDE.md` 详细文档
3. 查看 `PROJECT_SUMMARY.md` 技术文档
4. 联系技术支持

---

**祝部署顺利!** 🚀
