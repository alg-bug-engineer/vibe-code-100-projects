**摘要：** 本文以一个资深研发的视角，客观（且充满吐槽）地探讨了“Vibe Coding”（姑且翻译为“凭感觉编程”）现象。一方面，它极大地降低了创新门槛，让“全民开发”成为可能；另一方面，当这种模式被应用于严肃的、系统性的工程（如一个标准的多租户认证模块）时，它所暴露出的“架构缺失”和“点对点灭火”的陷阱，足以让最资深的工程师抓狂。

> 不贬低，不神话，客观对待
>

---

### 一、 Vibe Coding 的“黄金时代”：创新的民主化
我们必须承认，我们正处在一个“Vibe Coding”的黄金时代。

在过去，实现一个想法，你需要：`产品经理 -> UI/UX -> 前端 -> 后端 -> 运维`。  
而现在，你只需要一个（越来越聪明的）AI 助手，和一个（越来越模糊的）“Vibe”（感觉、想法）。

大量的非技术人员，通过向 GPT、Claude 或 Copilot 描述他们的“Vibe”，成功地“搓”出了无数小工具、小众需求的解决方案。这极大地满足了市场的长尾需求，这是“全民创新”的巨大胜利，值得肯定。

对于简单产品、独立脚本、或者“一次性”工具，Vibe Coding 几乎是完美的。它的开发效率，约等于“说人话”的速度。

### 二、当“资深 Vibe” 遇上 “AI Vibe”：认证模块的“死循环地狱”
问题来了。当一个资深研发，试图将这种高效的“Vibe”模式，应用到一个需要**强一致性、高安全性和多端兼容**的复杂产品时，噩梦开始了。

我的需求很明确：一个支持多用户、数据隔离、多端（Web, App）通用的产品。  
我卡住的环节很“基础”：**Web 认证（Auth）**。

我天真地以为，Copilot（或 GPT-5, Claude 4.5）能帮我处理掉这些“脏活累活”。我开始“Vibe”：

+ “我需要一个基于 JWT 的认证系统。”
+ “帮我加上 refresh token 机制。”
+ “确保 cookie 是 `HttpOnly` 和 `Secure` 的。”
+ “哦对了，这是个多租户系统，认证必须隔离 `tenant_id`。”
+ “为什么我的 Express 中间件拿不到用户信息？”

然后，我就掉进了那个“耗费了我 20% API 请求量”的兔子洞。

AI 的反应模式是极其“短视”的。这可以叫“点对点的灭火式开发”。

![](https://cdn.nlark.com/yuque/0/2025/png/406504/1761879477652-a410e204-631c-4e34-8441-7b585dcd70a9.png)

1. **它没有“架构图”：** 当我提到“中间件拿不到用户信息”时，AI 会立刻“修复”中间件的代码。它**不会**全局反思：“是不是因为在登录路由里，我签发 JWT 时就忘了把 `tenant_id` 放进 payload？”
2. **它（事实上的）“失忆症”：** 当我为了解决一个 CORS 问题，修改了 Nginx 配置（或者 Express 的 `cors` 插件）后，再去调试 Cookie 问题时，AI 已经完全忘记了 5 分钟前我们对 CORS 做了什么。它可能会给出一个与之前配置相冲突的“新建议”。
3. **“灭火”导致“纵火”：** 为了“修复”A 端（Web）的 Cookie 策略，它可能会破坏 B 端（App）基于 `Authorization` 头的 Token 校验逻辑。因为它没有“多端通用”这个**全局约束**的心智模型。

### 三、技术拆解：为什么 AI 在“架构”面前如此无力？
我们吐槽 AI，但也要技术性地分析它为什么会“循环”。

AI（大型语言模型）的核心是“基于上下文的下一个最优Token预测”。

一个 Web Auth 系统，是什么？它不是一个“函数”，它是一个“**状态机**”和“**契约**”。

它涉及：

+ **状态流转：** `请求 -> 中间件检查 -> 路由处理 -> 数据库读写 -> 签发 Token -> 设置响应头 -> 客户端存储 -> 下次请求携带`
+ **多方契约：** 客户端、服务端、数据库之间，关于“你是谁”的信任协议。

而 AI 呢？它拿到的是你那几千个 Token 的“上下文切片”。

+ **初级程序员 > AI：** 一个初级程序员，在解决“登录不上”的问题时，他会（笨拙地）在登录路由 `console.log`，然后去中间件 `console.log`，他至少**知道**这两个东西是**线性关联**的。
+ **AI 的短板：** AI 不知道。你给它中间件的代码，它就只看中间件。你给它登录路由的代码，它就只看登录路由。它无法（或者说极难）在没有被“喂”入全部代码和清晰架构图的前提下，理解“这个路由的**输出**是那个中间件的**输入**”。

这就是为什么，20% 的请求量，本质上是我在“用钱和时间，强行给 AI 灌输架构知识”，而它还在不断“遗忘”。

### 四、结论：Vibe 的归 Vibe，架构的归架构
Vibe Coding 不是银弹，它更像是一个“史上最强的初级程序员”（一个记忆力极差，但知识库极其庞大，且打字飞快的初级程序员）。

+ **对于“全民创新”：** 它是恩赐。它让 1 到 100 变得简单。
+ **对于“系统工程”：** 它是陷阱。它让 0 到 1 变得（看似）简单，但它会把 1 到 100 的“架构债”以“死循环”的方式提前预支给你。

**给资深研发的（吐槽式）建议：**

1. **Vibe 出“零件”，手搓“系统”：** 让 AI 帮你写 `bcrypt` 封装、写 JWT 工具函数、写数据库 schema。但**千万**别让它帮你“组装”——那个连接所有零件的“认证中间件”和“全局状态管理”，请你自己写。
2. **AI 是“副驾驶”，不是“自动驾驶”：** 你才是那个脑子里有“全局架构图”的机长。你可以问副驾驶（AI）：“帮我查一下 `HttpOnly` cookie 的最佳实践”，但你不能问他：“你来开，我要去客舱喝一杯。”
3. **珍惜你的请求量，** 它们比不上一个（虽然慢但）记得自己5分钟前干了啥的初级程序员。

